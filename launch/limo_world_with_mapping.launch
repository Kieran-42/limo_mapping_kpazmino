<?xml version="1.0"?>
<launch>
  <!-- Pass-through args for your world launch if you want to override -->
  <arg name="world_name" default="$(find limo_gazebo_sim)/worlds/willowgarage.world"/>
  <arg name="x" default="0.0"/>
  <arg name="y" default="0.0"/>
  <arg name="z" default="0.0"/>
  <arg name="yaw" default="0.0"/>

  <!-- 1) Bring up your Gazebo + RViz + Limo exactly as-is -->
  <include file="$(find limo_gazebo_sim)/launch/limo_four_diff.launch">
    <arg name="world_name" value="$(arg world_name)"/>
    <arg name="x" value="$(arg x)"/>
    <arg name="y" value="$(arg y)"/>
    <arg name="z" value="$(arg z)"/>
    <arg name="yaw" value="$(arg yaw)"/>
  </include>

  <!-- 2) Make sure we use simulated time everywhere -->
  <param name="use_sim_time" value="true"/>

  <!-- 3) Start slam_toolbox in synchronous mode using the Limo laser -->
  <node pkg="slam_toolbox" type="sync_slam_toolbox_node" name="slam_toolbox" output="screen">
    <param name="odom_frame" value="odom"/>
    <param name="map_frame" value="map"/>
    <param name="base_frame" value="base_link"/>
    <remap from="scan" to="/limo/scan"/>
    <!-- If your scan topic is different, change the remap above -->
  </node>

  <!-- Optional: spawn the simple map viewer here instead of running it manually
  <node pkg="your_pkg" type="map_viz.py" name="map_viz" output="screen"/>
  -->
</launch>